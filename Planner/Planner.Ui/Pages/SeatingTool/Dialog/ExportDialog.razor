@using Planner.Data.IO
@inject IJSRuntime JS

<MudCard Class="p-5">
    <MudStack>
        <MudText Typo="Typo.h6">
            Um deine aktuelle Konfiguration herunterzuladen, klicke hier.
        </MudText>
        <MudIconButton Icon="@Icons.Material.Outlined.Download" @onclick="DownloadExportFile"></MudIconButton>
    </MudStack>
</MudCard>
@code {

    [Parameter]
    public string ExportString { get; set; }

    private async Task DownloadExportFile()
    {
        var handler = new FileHandler();
        using var fileStream = await FileHandler.CreateExportFileStream(ExportString);
        
        const string fileName = "export.pLAN";

        using var streamRef = new DotNetStreamReference(stream: fileStream);

        await JS.InvokeVoidAsync("downloadFileFromStream", fileName, streamRef);
    }

}