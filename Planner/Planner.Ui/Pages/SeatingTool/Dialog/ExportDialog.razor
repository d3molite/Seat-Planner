@using Planner.Data.IO
@inject IJSRuntime JS

<MudCard Class="p-5">
    <MudStack>
        <MudText>
            Klicke unten um deine aktuelle Konfiguration herunterzuladen.
        </MudText>
        <MudIconButton Icon="@Icons.Material.Outlined.Download" Variant="Variant.Outlined" Color="Color.Success" @onclick="DownloadExportFile"></MudIconButton>
    </MudStack>
</MudCard>
@code {

    [Parameter]
    public string ExportString { get; set; }

    private async Task DownloadExportFile()
    {
        using var fileStream = await FileHandler.CreateExportFileStream(ExportString);
        
        const string fileName = "export.pLAN";

        using var streamRef = new DotNetStreamReference(stream: fileStream);

        await JS.InvokeVoidAsync("downloadFileFromStream", fileName, streamRef);
    }

}